#!/bin/bash

if [ $# -le 0 ]
then
    exit
fi
PLANNO=`echo $1 | sed 's/\//%2F/g'`
PLANNO_FN=`echo $1 | sed 's/\//_/g'`

SESSION_ID="jji52vj4esc2xaxtowrecejn"
TOKEN="abMiTY%2BrcApnn7FOOEETiYwV17aSDx%2BSLl6xHE8ESxbjgPEM5tItyEQWgMCwE8pwOOz9Z4GQOJE%2BWFPeDP3LZNG8EnVfk99VZ%2Fvj%2FQHqkMhOOElyUOQJuMnEAq0tOZ5I6Yc6rgsW%2BpaSLAi2hZMrThVIBF%2FOoJcU4NjJwECKaT4d14EjraWU4QcTb7KjnbZq2TJa7BBfeAQ88a7lr05Q8X50043pTGBVsQVlyd8NDRWwK9lqvRuvQdwNGlKYPTRTMHefPGJRSzHJAYoJirNJ72ipxocdglZNrstCd%2Brez2udzOmJ4ZFGsbY3RyzVYbpSzwBjY8smI9fg1vsIYJ2c102FpZ0SLkXC858wymIG4TaiA5RKqwv3TNr%2BK9wi5EN3W0Oqouzr2J9ebIz97xNS%2FQoOeUaRa6QhwbzALSfPRcHYVZ%2FUWJngn%2BX281ExqooNS%2FPckf7Nx6FUX7vRoVXZvyF7EQvrv323ONfRWfZ7W4F9k762ItKAVT%2B96dW%2B4tsgJsAfUx9dndMXbjxblEqqvsGwbHp6IeHYL2LAc2pOjMEQ4dk8%2F0ckdUIHLLAYOqxaNX7ucIp8oACApz1MTiSw1DKpemCFi2oYa8t62dazonDFRX9zaDYv%2F9Wvj%2BSn3ZdDLJ%2F8dgRwg2h0UBR42v6nAi9icvStgn3WUTL3aa90VXqsRn%2BsDlTC1aDF9XWDrhTmLKOOOA696czSu1gpg%2FIyHpw4Kgn9s%2BE7S58ow8BBcoOseqovE%2B95UdUCD8MccjvJM%2FtCa4cKCio6YwXs%2BU5FjQDrdrbUEf95c2GutvdHwBwKzR8n6k31rmfjWBGH7VMbU0BZVHcoYi6uBbyHQvZBmATzkiNnB4S3qTctjmRh6JsFn7sn6uiu%2FSHzJeYRXqkaQT2rprbNl3qQBk5%2BJLImINljzFWfARTeB8xdUifNOOA1HJSXllp5HcAnlAmNXmfehsbi1QiCDqZ6C3a2nia9K9oj3UaT3wh0ztZyW%2BT7Bv5hZ%2FQsv3LEv1Mn9e4lesCEEWFVYQj9qD1U0KOgqz4hxhBe11UiwNflADHg3EM%2Fw56dbgEbQ5t03nK4oRlcmnJQgkB5XzfScxQ%2B8ONWjYVHuSmA83ws1eBOyD8S%2FOaTl9PWl1oL4J2yo2EZ4lZcHGjP89cdKTI4efdF8OxdCXK5Mjn5FBuj6E3%2BnrGDS%2FMts1jiCKqBPua0l5%2F3xiPCG0%2BeB2DAO4K9MYuxcrCr7ITaDjXpxawvmqkTJg%2FlqSxkXHN2bGG7OmYpRO2foM8wh3zevX7Z8crbvHRvbhRj8iWGW%2Bl4wb1ezu66ec3Mr4l5cPH7rAf7UDAF%2BnWkz9k%2Fhx%2BBfeHAwmYsqtKUqDzSggEW7llrzgN13VhkEKMOBE2wuYwwI%2BkxNjFjkup0UxCUinlDcI9VNikQ9TJTF7eAJH3x4u34oMAIy3Hrrd1zyazOg4DWSFqz3QKcN6NQgKIpKs8afzapFQ%2FxOcdCAYq9qKkVQTdjlQkfGR3THQBMQVlnQrb37R3MPddRfpirVskUaOj6t7wh5%2FGAXkDEC1LOTPVWI1ha4rmZ8qOujTPqH9PSxYgJzzOrzYyJk1Dae8Vm7OwmWlaDSJ4I9ZATi2ScWpxgHTvGRK620Nc%2BH0WX1GfrXKIKD%2Bs5IZeaUv64GxDcnWjeZJAFGjeq%2B5fwdEu24%2FtgAg%3D%3D"
POSTDATA="lang=0&token=${TOKEN}&planno=${PLANNO}"

FO="${PLANNO_FN}.json"

if [ -s ${FO} ]
then
    exit
fi
echo ${PLANNO}

curl -s 'http://www2.ozp.tpb.gov.hk/PlanDAPI/Detail/Statutory/PlanNumber' -A 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.35 Safari/537.36' -d "${POSTDATA}" -o "${FO}"
